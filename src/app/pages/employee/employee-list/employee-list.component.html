<div class="container">
  <!-- T√≠tulo y descripci√≥n -->
  <div class="header">
    <h1 class="title">Gesti√≥n de Empleados</h1>
    <p class="subtitle">Administra la informaci√≥n de tus empleados</p>
  </div>

  <!-- Secci√≥n de filtros y b√∫squeda -->
  <div class="filters-section">
    <!-- Buscador -->
    <div class="search-container">
      <input
        type="text"
        [(ngModel)]="searchTerm"
        (input)="onFilterCharger()"
        placeholder="Buscar empleados..."
        class="search-input" autocomplete="off">

      <!-- Iconos de b√∫squeda y limpiar -->
      <div class="search-actions">
        <span class="search-icon">üîç</span>
        @if (searchTerm && searchTerm.trim() !== '') {
          <button
            type="button"
            (click)="clearFilters()"
            class="clear-button"
            title="Limpiar b√∫squeda">
            ‚úï
          </button>
        }
      </div>
    </div>

    <!-- Filtros -->
    <div class="filters-container">
      <!-- Filtro por provincia -->
      <select
        [(ngModel)]="selectedProvince"
        (change)="onFilterCharger()"
        class="filter-select">
        <option value="">Todas las provincias</option>
        @for (province of provinceOptions; track province) {
          <option [value]="province">{{ province }}</option>
        }
      </select>
    </div>


    <!-- Bot√≥n exportar y nuevo empleado -->
    <div class="actions-container">
      <button class="export-btn">Exportar</button>
      <button class="new-client-btn" (click)="newEmployee()">
        + Nuevo Empleado
      </button>
    </div>
  </div>

  <!-- Tabla de empleados -->
  <div class="table-container">
    <table class="clients-table">

      <!-- Cabecera -->
      <thead>
      <tr>
        <th>ID</th>
        <th>NOMBRE</th>
        <th>APELLIDOS</th>
        <th>EMAIL</th>
        <th>IDENTIFICACI√ìN</th>
        <th>TEL√âFONO</th>
        <th>DIRECCI√ìN</th>
        <th>C.P.</th>
        <th>LOCALIDAD</th>
        <th>PROVINCIA</th>
        <th>PA√çS</th>
        <th>CREADO</th>
        <th>ACTUALIZADO</th>
        <th>ACCIONES</th>
      </tr>
      </thead>

      <!-- Cuerpo de la tabla -->
      <tbody>
        @if (employees && employees.length > 0) {
          @for (employee of employees; track employee.id) {
            <tr>
              <td>#{{ employee.id }}</td>
              <td>{{ employee.name }}</td>
              <td>{{ employee.lastname }}</td>
              <td class="email-cell">{{ employee.email }}</td>
              <td class="identification-cell">{{ employee.identification }}</td>
              <td>{{ employee.phone }}</td>
              <td>{{ employee.address }}</td>
              <td class="postal-cell">{{ employee.postal_code }}</td>
              <td>{{ employee.location }}</td>
              <td>{{ employee.province }}</td>
              <td>{{ employee.country }}</td>
              <td>{{ employee.date_create | dataFormat }}</td>
              <td>{{ employee.date_update | dataFormat }}</td>
              <td>
                <button class="action-btn edit-btn" (click)="editEmployee(employee.id!)">
                  Editar
                </button>
                <button class="action-btn delete-btn" (click)="deleteEmployee(employee.id!)">
                  Eliminar
                </button>
              </td>
            </tr>
          }
        } @else {
          <tr>
            <td colspan="14" class="no-data">
              <div class="empty-state">
                <div class="empty-state__icon">üë§</div>
                <h3 class="empty-state__title">No se encontraron empleados</h3>
                <button class="new-client-btn" (click)="newEmployee()">
                  + Nuevo Empleado
                </button>
              </div>
            </td>
          </tr>
        }
      </tbody>

    </table>
  </div>


  <!-- Paginaci√≥n -->
  @if (paginationResult.totalPages > 1) {
    <div class="pagination-container">

      <!-- Informaci√≥n de resultados -->
      <div class="pagination-info">
        {{ getPaginationText() }}
      </div>

      <!-- Controles de paginaci√≥n -->
      <div class="pagination-controls">

        <!-- Bot√≥n anterior -->
        <button
          class="pagination-btn"
          [class.disabled]="!paginationResult.hasPrevious"
          (click)="previousPage()"
          [disabled]="!paginationResult.hasPrevious"
        >
          ‚Äπ Anterior
        </button>

        <!-- N√∫meros de p√°gina -->
        @for (page of getVisiblePages(); track page) {
          <button
            class="pagination-btn"
            [class.active]="page === paginationConfig.currentPage"
            (click)="goToPage(page)"
          >
            {{ page }}
          </button>
        }

        <!-- Puntos suspensivos si hay m√°s p√°ginas -->
        @if (paginationResult.totalPages > 5 && paginationConfig.currentPage < paginationResult.totalPages - 2) {
          <span class="pagination-dots">...</span>
        }

        <!-- √öltima p√°gina -->
        @if (paginationResult.totalPages > 5 && paginationConfig.currentPage < paginationResult.totalPages - 2) {
          <button
            class="pagination-btn"
            (click)="goToPage(paginationResult.totalPages)"
          >
            {{ paginationResult.totalPages }}
          </button>
        }

        <!-- Bot√≥n siguiente -->
        <button
          class="pagination-btn"
          [class.disabled]="!paginationResult.hasNext"
          (click)="nextPage()"
          [disabled]="!paginationResult.hasNext"
        >
          Siguiente ‚Ä∫
        </button>

      </div>
    </div>
  }

</div>
