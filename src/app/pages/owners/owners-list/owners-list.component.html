<!-- Listado y gesti√≥n de propietarios -->
<div class="list-wrapper">
  <h2>Listado de Propietarios</h2>

  <!-- Barra de b√∫squeda -->
  <div class="search-container">
    <!-- Campo de b√∫squeda con filtro en tiempo real -->
    <div class="search-wrapper">
      <input
        type="text"
        [(ngModel)]="searchTerm"
        (input)="onSearchChange()"
        placeholder="Busqueda por nombre, indentificacion, tel√©fono o NIF..."
        class="search-input"
      >
      <!-- Iconos de b√∫squeda y limpiar -->
      <div class="search-actions">
        <span class="search-icon">üîç</span>
        @if (searchTerm && searchTerm.trim() !== '') {
          <button
            type="button"
            (click)="clearSearch()"
            class="clear-button"
            title="Limpiar b√∫squeda"
          >
            ‚úï
          </button>
        }
      </div>
    </div>
    <!-- Contador de resultados de b√∫squeda -->
    @if (searchTerm && searchTerm.trim() !== '') {
      <div class="search-results-info">
        <span>Mostrando {{ owners.length }} de {{ allOwners.length }} clientes</span>
      </div>
    }
  </div>

  <!-- Tabla de propietarios -->
  <table>
    <!-- Encabezados de la tabla -->
    <thead>
    <tr>
      <th>ID</th>
      <th>Nombre</th>
      <th>Apellidos</th>
      <th>Email</th>
      <th>NIF</th>
      <th>Tel√©fono</th>
      <th>Direcci√≥n</th>
      <th>C.P</th>
      <th>Localidad</th>
      <th>Provincia</th>
      <th>Pais</th>
      <th>Creado</th>
      <th>Actualizado</th>
      <th>Acciones</th>
    </tr>
    </thead>

    <!-- Contenido de la tabla -->
    <tbody>
    <!-- Lista de propietarios existentes -->
      @for (owner of owners; track owner.id) {
        <tr>
          <td>{{ owner.id }}</td>
          <td>{{ owner.name }}</td>
          <td>{{ owner.lastname }}</td>
          <td>{{ owner.email }}</td>
          <td>{{ owner.identification }}</td>
          <td>{{ owner.phone }}</td>
          <td>{{ owner.address }}</td>
          <td>{{ owner.postal_code }}</td>
          <td>{{ owner.location }}</td>
          <td>{{ owner.province }}</td>
          <td>{{ owner.country }}</td>
          <td>{{ owner.date_create | dataFormat }}</td>
          <td>{{ owner.date_update | dataFormat }}</td>
          <!-- Botones de acci√≥n por propietario -->
          <td>
            <button (click)="editOwner(owner.id!)">Editar</button>
            <button (click)="deleteOwner(owner.id!)">Eliminar</button>
          </td>
        </tr>
      }
    </tbody>
  </table>
</div>
