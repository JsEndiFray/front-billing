<div class="container">
  <!-- T√≠tulo y descripci√≥n -->
  <div class="header">
    <h1 class="title">Gesti√≥n de Usuarios</h1>
    <p class="subtitle">Busca, visualiza y administra los usuarios del sistema</p>
  </div>

  <!-- Secci√≥n de filtros y b√∫squeda -->
  <div class="filters-section">
    <!-- Buscador-->
    <div class="search-container">
      <input
        type="text"
        [(ngModel)]="searchTerm"
        (input)="onSearchChange()"
        placeholder="Buscar por nombre, email, rol..."
        class="search-input" autocomplete="off">

      <!-- Iconos de b√∫squeda y limpiar -->
      <div class="search-actions">
        <span class="search-icon">üîç</span>
        @if (searchTerm && searchTerm.trim() !== '') {
          <button
            type="button"
            (click)="clearSearch()"
            class="clear-button"
            title="Limpiar b√∫squeda">
            ‚úï
          </button>
        }
      </div>
    </div>

    <!-- Bot√≥n nuevo usuario -->
    <div class="actions-container">
      <button class="export-btn">Exportar</button>
      <button type="button" class="primary-btn" (click)="newUser()">
        + Nuevo Usuario
      </button>
    </div>
  </div>

  <!-- Informaci√≥n de resultados de b√∫squeda -->
  @if (searchTerm && searchTerm.trim() !== '') {
    <div class="search-results-info">
      <span>Mostrando {{ users.length }} de {{ allUsers.length }} usuarios</span>
    </div>
  }

  <!-- Tabla de usuarios -->
  <div class="table-container">
    <table class="clients-table">

      <!-- Cabecera -->
      <thead>
      <tr>
        <th>ID</th>
        <th>USUARIO</th>
        <th>CONTRASE√ëA (HASH)</th>
        <th>EMAIL</th>
        <th>TEL√âFONO</th>
        <th>ROL</th>
        <th>CREADO</th>
        <th>ACTUALIZADO</th>
        <th>ACCIONES</th>
      </tr>
      </thead>

      <!-- Cuerpo de la tabla -->
      <tbody>
        @if (users && users.length > 0) {
          @for (user of users; track user.id) {
            <tr>
              <td>#{{ user.id }}</td>
              <td>{{ user.username }}</td>
              <td>{{ user.password }}</td>
              <td>{{ user.email }}</td>
              <td>{{ user.phone }}</td>
              <td>{{ user.role }}</td>
              <td>{{ user.date_create | dataFormat }}</td>
              <td>{{ user.date_update | dataFormat }}</td>
              <td>
                <button class="action-btn edit-btn" (click)="editUser(user.id!)">
                  Editar
                </button>
              </td>
            </tr>
          }
        } @else {
          <tr>
            <td colspan="9" class="no-data">
              <div class="empty-state">
                <div class="empty-state__icon">üë§</div>
                <h3 class="empty-state__title">No se encontraron usuarios</h3>
                <button class="primary-btn" (click)="newUser()" type="button">
                  + Crear primer usuario
                </button>

              </div>
            </td>
          </tr>
        }
      </tbody>

    </table>
  </div>
</div>
