<div class="container">
  <!-- Título y descripción -->
  <div class="header">
    <h1 class="title">Gestión de Porcentajes</h1>
    <p class="subtitle">Administra los porcentajes de propiedad de inmuebles</p>
  </div>

  <!-- Sección de filtros y búsqueda -->
  <div class="filters-section">

    <!-- Buscador -->
    <div class="search-container">
      <input
        type="text"
        [(ngModel)]="searchTerm"
        (input)="onSearchChange()"
        placeholder="Buscar por propiedad, propietario o porcentaje..."
        class="search-input"
      >
    </div>

    <!-- Botón exportar y nuevo registro -->
    <div class="actions-container">
      <button class="export-btn">Exportar</button>
      <button class="new-client-btn" (click)="newEstateOwner()">+ Nuevo Porcentaje</button>
    </div>

  </div>

  <!-- Tabla de porcentajes -->
  <div class="table-container">
    <table class="clients-table">

      <!-- Cabecera -->
      <thead>
      <tr>
        <th>ID</th>
        <th>PROPIEDAD</th>
        <th>PROPIETARIO</th>
        <th>PORCENTAJE (%)</th>
        <th>CREADO</th>
      </tr>
      </thead>

      <!-- Cuerpo de la tabla -->
      <tbody>
        @if (estateOwners && estateOwners.length > 0) {
          @for (item of estateOwners; track item.id) {
            <tr>
              <td>#{{ item.id }}</td>
              <td class="property-cell">{{ item.estate_name }}</td>
              <td class="owner-cell">{{ item.owner_name }}</td>
              <td class="percentage-cell">{{ item.ownership_percentage }}%</td>
              <td>{{ item.date_create | dataFormat }}</td>
            </tr>
          }
        } @else {
          <tr>
            <td colspan="5" class="no-data">
              <div class="empty-state">
                <p>No se encontraron porcentajes de propiedades</p>
                <button class="new-client-btn" (click)="newEstateOwner()">
                  + Nuevo Porcentaje
                </button>
              </div>
            </td>
          </tr>
        }
      </tbody>

    </table>
  </div>

  <!-- Información de resultados de búsqueda -->
  @if (searchTerm && searchTerm.trim() !== '') {
    <div class="search-results-info">
      Mostrando {{ estateOwners.length }} de {{ allEstateOwners.length }} relaciones
    </div>
  }

</div>
