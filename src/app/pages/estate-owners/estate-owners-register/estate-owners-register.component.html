<div class="container">
  <!-- T√≠tulo y descripci√≥n -->
  <div class="header">
    <h1 class="title">Registrar Porcentaje de Propiedad</h1>
    <p class="subtitle">Asignar porcentaje de propiedad a un inmueble</p>
  </div>

  <!-- Formulario principal -->
  <form (ngSubmit)="register()" #ownershipForm="ngForm">

    <!-- Secci√≥n: Selecci√≥n de elementos -->
    <div class="section">
      <h2 class="section-title">üè¢ Selecci√≥n de Propiedad y Propietario</h2>
      <div class="form-grid">

        <div class="form-field">
          <label for="estate" class="form-label">Propiedad *</label>
          <select
            [(ngModel)]="ownership.estate_id"
            name="estate_id"
            id="estate"
            class="form-select"
            required>
            <option value="" disabled>Selecciona una propiedad</option>
            @if (loading) {
              <option disabled>Cargando propiedades...</option>
            } @else {
              @for (estate of estates; track estate.id) {
                <option [value]="estate.id">
                  {{ estate.address }} - {{ estate.cadastral_reference }}
                </option>
              }
            }
          </select>
        </div>

        <div class="form-field">
          <label for="owner" class="form-label">Propietario *</label>
          <select
            [(ngModel)]="ownership.owners_id"
            name="owners_id"
            id="owner"
            class="form-select"
            required>
            <option value="" disabled>Selecciona un propietario</option>
            @if (loading) {
              <option disabled>Cargando propietarios...</option>
            } @else {
              @for (owner of owners; track owner.id) {
                <option [value]="owner.id">
                  {{ owner.name }} {{ owner.lastname }} ({{ owner.identification }})
                </option>
              }
            }
          </select>
        </div>

      </div>
    </div>

    <!-- Secci√≥n: Porcentaje de propiedad -->
    <div class="section">
      <h2 class="section-title">üìä Porcentaje de Propiedad</h2>
      <div class="form-grid">

        <div class="form-field form-field-full">
          <label for="porcentaje" class="form-label">Porcentaje de Propiedad (%) *</label>
          <input
            type="number"
            step="0.01"
            min="0.01"
            max="100"
            [(ngModel)]="ownership.ownership_percentage"
            name="ownership_percentage"
            id="porcentaje"
            placeholder="50.00"
            class="form-input percentage-input"
            required>
          <small class="help-text">Ejemplo: 50.00 = 50% de la propiedad</small>
        </div>

      </div>
    </div>

    <!-- Botones de acci√≥n -->
    <div class="actions-section">
      <button type="submit" class="primary-btn" [disabled]="!ownershipForm.valid || loading">
        @if (loading) {
          ‚è≥ Registrando...
        } @else {
          ‚úì Registrar Porcentaje
        }
      </button>
      <button type="button" class="secondary-btn" (click)="goBack()">
        ‚Üê Volver al Listado
      </button>
    </div>

  </form>
</div>
